---
title: "LLMがCLIを直接使うのとMCP経由で使うのでは何が違うか、結論LLMが知ってるかどうかで使い分けるとよい"
date: 2025-01-18
description: "LLMがCLIを直接使うのとMCP経由で使うのでは何が違うか、MCPのメリットと使い分けについて"
categories: [tips]
tags: [llm, mcp, cli, claude, tools]
---

## まとめ

- LLMが知っているCLI（git、ls、curl等）は直接実行で効率的、MCPでラップする必要なし
- LLMが知らないツール（自前開発のcli、社内API等）はMCPでschemaやpromptを定義できるので間違いを減らせる
- よく知られたCLIの最新機能（例：npm query）もLLMが知らない可能性があるのでMCP経由で確実に使える
- MCPはサービス提供者側がLLMの振る舞いをプログラマティックに制御できるのが革命的（セキュリティ制御、危険なコマンドのブロック等）
- MCPサーバーは状態を保持できる（DB接続の維持、セッション管理等）、CLIは基本的にステートレスで毎回起動
- MCPは構造化されたJSON応答でLLMがパースしやすい、CLIはテキスト出力でパースエラーが起きやすい
- MCPサーバーは起動したままなので高速、重いCLI（JVMベースなど）は毎回起動コストがかかる
- MCPは利用可能なツールのリストを動的に提供できる、CLIはLLMが事前に知っている必要がある
- MCPは構造化されたエラーレスポンス、CLIのエラーメッセージはLLMが理解しにくい場合がある
- ただしコンテキストが肥大化するとMCPの存在を忘れたりと不安定なところもあり改善の余地はある