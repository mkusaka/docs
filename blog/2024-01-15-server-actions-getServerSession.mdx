---
title: "next.js で server actions で getServerSession で session を取ろうとする際には authOption がいる"
date: 2024-01-15
description: "next.js で server actions で getServerSession で session を取ろうとする際には authOption がいる"
categories: [next.js]
tags: [next.js, server actions]
---

## まとめ

- next.js で server actions で getServerSession で session を取ろうとする際には authOption がいる
- rsc で session を取る場合には authOption が不要だったため、若干ハマった

```tsx
// rsc

export async function Page() {
  const session = await getServerSession();
  // do something ...
}

// server actions

export async function someActions(state: unknown, formData: FormData) {
  const session = await getServerSession(authOption);
  // do something ...
}
```

## ref

- [Get Server Session in Server Actions · Issue #7460 · nextauthjs/next-auth](https://github.com/nextauthjs/next-auth/issues/7460)
